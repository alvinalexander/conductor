(this.webpackJsonpconductor=this.webpackJsonpconductor||[]).push([[0],{26:function(e,t){},27:function(e,t){},31:function(e,t,n){e.exports=n(59)},36:function(e,t,n){},45:function(e,t){},46:function(e,t){},47:function(e,t){},59:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n.n(a),i=n(24),o=n.n(i),s=(n(36),n(7),n(3)),c=n.n(s),u=n(5),l=n(6),d=n(12),h=n(8),f=n(9),v=(n(38),n(39),n(30)),m=n(25),p=n(28),w=n(0),g=(n(20),n(29)),y=n.n(g);m.a("https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm@".concat(p.version,"/dist/tfjs-backend-wasm.wasm"));var b,k,x={thumb:[0,1,2,3,4],indexFinger:[0,5,6,7,8],middleFinger:[0,9,10,11,12],ringFinger:[0,13,14,15,16],pinky:[0,17,18,19,20]},R=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={backend:"webgl"},a.videoRef=r.a.createRef(),a.canvasRef=r.a.createRef(),a.styles={position:"fixed",top:150,left:150},a}return Object(d.a)(n,[{key:"drawPoint",value:function(e,t,n,a){e.beginPath(),e.arc(n,t,a,0,2*Math.PI),e.fill()}},{key:"drawKeypoints",value:function(e,t){for(var n=t,a=0;a<n.length;a++){var r=n[a][0],i=n[a][1];this.drawPoint(e,i-2,r-2,3)}for(var o=Object.keys(x),s=0;s<o.length;s++){var c=o[s],u=x[c].map((function(e){return t[e]}));this.drawPath(e,u,!1)}}},{key:"drawPath",value:function(e,t,n){var a=new Path2D;a.moveTo(t[0][0],t[0][1]);for(var r=1;r<t.length;r++){var i=t[r];a.lineTo(i[0],i[1])}n&&a.closePath(),e.stroke(a)}},{key:"setupCamera",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=2;break}throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");case 2:return t=this.videoRef.current,e.next=5,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:640,height:500}});case 5:return n=e.sent,t.srcObject=n,e.abrupt("return",new Promise((function(e){t.onloadedmetadata=function(){e(t)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadVideo",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setupCamera();case 2:return(t=e.sent).play(),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.jc(this.state.backend);case 2:return e.next=4,v.a();case 4:return t=e.sent,e.next=7,this.setState({model:t});case 7:return e.prev=7,e.next=10,this.loadVideo();case 10:n=e.sent,e.next=19;break;case 13:throw e.prev=13,e.t0=e.catch(7),(a=document.getElementById("info")).textContent=e.t0.message,a.style.display="block",e.t0;case 19:this.landmarksRealTime(n);case 20:case"end":return e.stop()}}),e,this,[[7,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"landmarksRealTime",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n,a,r,i,o,s=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.state.model,(a=new y.a).showPanel(0),document.body.appendChild(a.dom),a.domElement.style={top:500,left:500},b=t.videoWidth,k=t.videoHeight,(r=this.canvasRef.current).width=b,r.height=k,i=r.getContext("2d"),t.width=b,t.height=k,i.clearRect(0,0,b,k),i.strokeStyle="red",i.fillStyle="red",i.translate(r.width,0),i.scale(-1,1),[[0,0,0],[0,-500,0],[-640,0,0],[-640,-500,0]],(o=function(){var e=Object(u.a)(c.a.mark((function e(){var u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.begin(),i.drawImage(t,0,0,b,k,0,0,r.width,r.height),e.next=4,n.estimateHands(t);case 4:(u=e.sent).length>0&&(l=u[0].landmarks,s.drawKeypoints(i,l,u[0].annotations)),a.end(),requestAnimationFrame(o);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())();case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showDetections",value:function(e){var t=this.canvasRef.current.getContext("2d");t.clearRect(0,0,t.canvas.width,t.canvas.height);var n="24px helvetica";t.font=n,t.textBaseline="top",e.forEach((function(e){var a=e.bbox[0],r=e.bbox[1],i=e.bbox[2],o=e.bbox[3];t.strokeStyle="#2fff00",t.lineWidth=1,t.strokeRect(a,r,i,o),t.fillStyle="#2fff00";var s=t.measureText(e.class).width,c=parseInt(n,10);t.fillRect(a,r,s+10,c+10),t.fillRect(a,r+o-c,s+15,c+10),t.fillStyle="#000000",t.fillText(e.class,a,r),t.fillText(e.score.toFixed(2),a,r+o-c)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("video",{style:this.styles,autoPlay:!0,muted:!0,ref:this.videoRef,width:640,height:500}),r.a.createElement("canvas",{style:this.styles,ref:this.canvasRef,width:b,height:k}))}}]),n}(r.a.Component);var j=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Handpose"),r.a.createElement(R,null))},E=function(){return r.a.createElement(j,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.295d251b.chunk.js.map